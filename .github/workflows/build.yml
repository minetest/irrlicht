name: build

# build on c/cpp changes or workflow changes
on:
  - push
  - pull_request

jobs:
  # This is our minor gcc compiler
  build:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2
      - name: Install deps
        run: |
          sudo apt-get install -qyy cmake g++ gcc libbz2-dev libpng-dev libjpeg-dev wget zlib1g-dev \
            libasound2-dev libdbus-1-dev libegl1-mesa-dev libgl1-mesa-dev libgles2-mesa-dev libglu1-mesa-dev libibus-1.0-dev libpulse-dev libsndio-dev libudev-dev libwayland-dev libx11-dev libxcursor-dev libxext-dev libxi-dev libxinerama-dev libxkbcommon-dev libxrandr-dev libxss-dev libxt-dev libxv-dev libxxf86vm-dev 

      - name: Build SDL
        run: |
          wget https://www.libsdl.org/release/SDL2-2.0.14.tar.gz
          echo 'd8215b571a581be1332d2106f8036fcb03d12a70bae01e20f424976d275432bc  SDL2-2.0.14.tar.gz' | sha256sum -c
          tar -xzf SDL2-2.0.14.tar.gz
          cd SDL2-2.0.14
          mkdir cmake-build-release
          cd cmake-build-release
          cmake -DCMAKE_BUILD_TYPE=Release -DSDL_SHARED=TRUE -DSDL_STATIC=FALSE ..
          cmake --build .
          sudo cmake --install .

      - name: Build
        run: |
          mkdir cmake-build-release
          cd cmake-build-release
          cmake -DCMAKE_BUILD_TYPE=Release ..
          cmake --build .

